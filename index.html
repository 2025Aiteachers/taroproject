<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025년 타로카드 신년운세</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: black;
            color: white;
        }
        h1 {
            font-size: 2em;
            margin-top: 30px;
            color: gold;
        }
        h2 {
            font-size: 1.2em;
            margin: 50px 0 10px;
        }
        img {
            width: 150px;
            cursor: pointer;
            transition: transform 1s ease-in-out;
        }
        .card {
            display: inline-block;
            margin: 20px;
            perspective: 1000px;
        }
        .card-inner {
            width: 150px;
            height: 220px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1.5s ease-in-out;
        }
        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
        }
        .card-front {
            transform: rotateY(0deg);
        }
        .card-back {
            transform: rotateY(180deg);
        }
        .card-inner.flipped {
            transform: rotateY(180deg);
        }
        .description {
            margin-top: 20px;
            font-size: 1.1em;
            color: gold;
        }
        .reset-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1.2em;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .reset-button:hover {
            background-color: #0056b3;
        }
        .hidden {
            display: none;
        }
    </style>
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
</head>
<body>
    <h1>2025년 타로카드 신년운세</h1>
    <p>세 장의 카드를 차례로 클릭해서 당신의 과거, 현재, 미래 운세를 확인하세요!</p>
    <div class="cards">
        <div class="card" id="card1">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://github.com/hahamanman/taroproject/blob/main/00_backdesign.jpg?raw=true" alt="Card Front">
                </div>
                <div class="card-back">
                    <img id="cardImage1" src="" alt="Card Back">
                </div>
            </div>
        </div>
        <div class="card" id="card2">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://github.com/hahamanman/taroproject/blob/main/00_backdesign.jpg?raw=true" alt="Card Front">
                </div>
                <div class="card-back">
                    <img id="cardImage2" src="" alt="Card Back">
                </div>
            </div>
        </div>
        <div class="card" id="card3">
            <div class="card-inner">
                <div class="card-front">
                    <img src="https://github.com/hahamanman/taroproject/blob/main/00_backdesign.jpg?raw=true" alt="Card Front">
                </div>
                <div class="card-back">
                    <img id="cardImage3" src="" alt="Card Back">
                </div>
            </div>
        </div>
    </div>

    <h2 id="cardName"></h2>
    <p class="description" id="cardDescription"></p>

    <button class="reset-button hidden" id="resetButton">처음으로 돌아가기</button>
    <button class="reset-button hidden" id="kakaoShareButton">카카오톡으로 공유하기</button>

    <script>
        Kakao.init('7a8d42b217b82c4d4b314e8dfd73af08'); // 실제 JavaScript 키로 대체하세요.

        const cards = [
            { 
                name: "The Fool (광대)", 
                image: "https://github.com/hahamanman/taroproject/blob/main/01_the%20fool.jpg?raw=true", 
                descriptions: {
                    past: "새로운 모험을 향해 첫걸음을 내딛었습니다. 그 과정에서 얻은 경험이 당신을 더욱 성장하게 했습니다.",
                    present: "당신은 이제 새로운 기회를 마주하고 있습니다. 결단력이 필요한 시점입니다.",
                    future: "새로운 시작을 두려워하지 마세요! 내년에는 실수조차도 AI가 모두 다 고쳐줄 거에요."
                }
            },
            // 나머지 카드 데이터 여기에 추가
        ];

        const cardElements = document.querySelectorAll('.card');
        const cardInnerElements = document.querySelectorAll('.card-inner');
        const cardImages = [document.getElementById("cardImage1"), document.getElementById("cardImage2"), document.getElementById("cardImage3")];
        const cardName = document.getElementById("cardName");
        const cardDescription = document.getElementById("cardDescription");
        const resetButton = document.getElementById("resetButton");
        const kakaoShareButton = document.getElementById("kakaoShareButton");
        let flipCount = 0;

        cardElements.forEach((card, index) => {
            card.addEventListener("click", () => {
                if (flipCount >= 3 || cardInnerElements[index].classList.contains("flipped")) return;

                const randomIndex = Math.floor(Math.random() * cards.length);
                const selectedCard = cards[randomIndex];

                cardImages[index].src = selectedCard.image;
                const position = ['past', 'present', 'future'];
                const positionText = ['과거', '현재', '미래'];

                cardName.innerHTML += `<br/><strong>${positionText[flipCount]}:</strong> ${selectedCard.name}`;
                cardDescription.innerHTML += `<strong>${positionText[flipCount]}:</strong> ${selectedCard.descriptions[position[flipCount]]} <br/>`;

                cardInnerElements[index].classList.add("flipped");
                flipCount++;

                if (flipCount === 3) {
                    setTimeout(() => {
                        resetButton.classList.remove("hidden");
                        kakaoShareButton.classList.remove("hidden");
                    }, 1500);
                }
            });
        });

        resetButton.addEventListener("click", () => {
            flipCount = 0;
            cardInnerElements.forEach(el => el.classList.remove("flipped"));
            cardImages.forEach(img => img.src = "");
            cardName.textContent = "";
            cardDescription.textContent = "";
            resetButton.classList.add("hidden");
            kakaoShareButton.classList.add("hidden");
        });

        kakaoShareButton.addEventListener('click', function() {
            Kakao.Link.sendDefault({
                objectType: 'feed',
                content: {
                    title: '2025년 타로카드 신년운세',
                    description: document.getElementById('cardDescription').innerText,
                    imageUrl: document.getElementById('cardImage1').src, // 첫 번째 카드 이미지 사용
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href
                    }
                }
            });
        });
    </script>
</body>
</html>
